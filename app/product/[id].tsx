// Previous product details page with all functionality restored
// See latest_code for full implementation